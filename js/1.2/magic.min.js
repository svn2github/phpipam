
$(document).ready(function(){function showSpinner(){$('div.loading').show();}
function hideSpinner(){$('div.loading').fadeOut('fast');}
$(document).keydown(function(e){if(e.keyCode===27){hidePopups();}});function open_popup(popup_class,target_script,post_data,secondary){secondary=typeof secondary!=='undefined'?secondary:false;showSpinner();$.post(target_script,post_data,function(data){showPopup('popup_w'+popup_class,data,secondary);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;}
function submit_popup_data(result_div,target_script,post_data,reload){showSpinner();reload=typeof reload!=='undefined'?reload:true;$.post(target_script,post_data,function(data){$('div'+result_div).html(data).slideDown('fast');if(reload){if(data.search("alert-danger")==-1&&data.search("error")==-1&&data.search("alert-warning")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;}
function reload_window(data){if(data.search("alert-danger")==-1&&data.search("error")==-1&&data.search("alert-warning")==-1){setTimeout(function(){window.location.reload();},1500);}
else{hideSpinner();}}
$('div.jqueryError').hide();function showError(errorText){$('div.jqueryError').fadeIn('fast');if(errorText.length>0){$('.jqueryErrorText').html(errorText).show();}
hideSpinner();}
function hideError(){$('.jqueryErrorText').html();$('div.jqueryError').fadeOut('fast');}
$(document).on("click","#hideError",function(){hideError();return false;});$('.disabled a').click(function(){return false;});function hideTooltips(){$('.tooltip').hide();}
function showPopup(pClass,data,secondary){showSpinner();if(secondary===true){var oclass="#popupOverlay2";}
else{var oclass="#popupOverlay";}
$(oclass).fadeIn('fast');if(data!==false&&typeof(data)!=="undefined"){$(oclass+' .'+pClass).html(data);}
if(secondary!=true){$('#popupOverlay2 > div').empty();}
$(oclass+' .'+pClass).fadeIn('fast');$('body').addClass('stop-scrolling');}
function hidePopup(pClass,secondary){if(secondary===true){var oclass="#popupOverlay2";}
else{var oclass="#popupOverlay";}
$(oclass+' .'+pClass).fadeOut('fast');$(oclass+' > div').empty();}
function hidePopups(){$('#popupOverlay').fadeOut('fast');$('#popupOverlay2').fadeOut('fast');$('#popupOverlay > div').empty();$('#popupOverlay2 > div').empty();$('.popup').fadeOut('fast');$('body').removeClass('stop-scrolling');hideSpinner();}
function hidePopup2(){$('#popupOverlay2').fadeOut('fast');$('#popupOverlay2 .popup').fadeOut('fast');$('#popupOverlay2 > div').empty();hideSpinner();}
function hidePopupMasks(){$('.popup_wmasks').fadeOut('fast');hideSpinner();}
$(document).on("click",".hidePopups",function(){hidePopups();});$(document).on("click",".hidePopup2",function(){hidePopup2();});$(document).on("click",".hidePopupMasks",function(){hidePopupMasks();});$(document).on("click",".hidePopupsReload",function(){window.location.reload();});$('a.disabled, button.disabled').click(function(){return false;});$('body').on('touchstart.dropdown','.dropdown-menu',function(e){e.stopPropagation();});function randomPass(){var chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";var pass="";var x;var i;for(x=0;x<10;x++){i=Math.floor(Math.random()*62);pass+=chars.charAt(i);}
return pass;}
$(document).on("click",".selfDestruct",function(){$(this).parent('div').fadeOut('fast');});function createCookie(name,value,days){var date;var expires;if(typeof days==='undefined'){date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString();}
else{var expires="";}
document.cookie=name+"="+value+expires+"; path=/";}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)===0)return c.substring(nameEQ.length,c.length);}
return null;}
$(function(){$(".popup").draggable({handle:".pHeader"});});if($('#dashboard').length>0){$('div[id^="w-"]').each(function(){var w=$(this).attr('id');w=w.replace("w-","");$.post('app/dashboard/widgets/'+w+'.php',function(data){$("#w-"+w+' .hContent').html(data);}).fail(function(xhr,textStatus,errorThrown){$("#w-"+w+' .hContent').html('<blockquote style="margin-top:20px;margin-left:20px;">File not found!</blockquote>');});});}
$(document).on('click','.add-new-widget',function(){showSpinner();$.post('app/dashboard/widget-popup.php',function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('click',"i.remove-widget",function(){$(this).parent().parent().fadeOut('fast').remove();});$(document).on('click','#sortablePopup li a.widget-add',function(){var wid=$(this).attr('id');var wsize=$(this).attr('data-size');var wtitle=$(this).attr('data-htitle');var data='<div class="row-fluid"><div class="span'+wsize+' widget-dash" id="'+wid+'"><div class="inner movable"><h4>'+wtitle+'</h4><div class="hContent"></div></div></div></div>';$('#dashboard').append(data);w=wid.replace("w-","");$.post('app/dashboard/widgets/'+w+'.php',function(data){$("#"+wid+' .hContent').html(data);}).fail(function(xhr,textStatus,errorThrown){$("#"+wid+' .hContent').html('<blockquote style="margin-top:20px;margin-left:20px;">File not found!</blockquote>');});$(this).parent().fadeOut('fast');return false;});$('ul.submenu.submenu-close').hide();$('.icon-folder-close,.icon-folder-show, .icon-search').tooltip({delay:{show:2000,hide:0},placement:"bottom"});$('ul#subnets').on("click",".fa-folder-close-o",function(){$(this).removeClass('fa-folder-close-o').addClass('fa-folder-open-o');$(this).nextAll('.submenu').slideDown('fast');update_subnet_structure_cookie("add",$(this).attr("data-str_id"));});$('ul#subnets').on("click",".fa-folder",function(){$(this).removeClass('fa-folder').addClass('fa-folder-open');$(this).nextAll('.submenu').slideDown('fast');update_subnet_structure_cookie("add",$(this).attr("data-str_id"));});$('ul#subnets').on("click",".fa-folder-open-o",function(){$(this).removeClass('fa-folder-open-o').addClass('fa-folder-close-o');$(this).nextAll('.submenu').slideUp('fast');update_subnet_structure_cookie("remove",$(this).attr("data-str_id"));});$('ul#subnets').on("click",".fa-folder-open",function(){$(this).removeClass('fa-folder-open').addClass('fa-folder');$(this).nextAll('.submenu').slideUp('fast');update_subnet_structure_cookie("remove",$(this).attr("data-str_id"));});function update_subnet_structure_cookie(action,cid){var s_cookie=readCookie("sstr");if(typeof s_cookie==='undefined'||s_cookie==null||s_cookie.length===0)s_cookie="|";if(action=="add"){var arr=s_cookie.split('|');var exists=false;for(var i=0;i<arr.length;i++){if(arr[i]==cid){exists=true;}}
if(exists==false)s_cookie+=cid+"|";}
else if(action=="remove"){s_cookie=s_cookie.replace("|"+cid+"|","|");}
createCookie("sstr",s_cookie,365);}
$('#hideSubnets').click(function(){$('#leftMenu').hide('fast');$('#content').css("width","97.9147%");return false;});$('#expandfolders').click(function(){var action=$(this).attr('data-action');if(action=='close'){$('.subnets ul#subnets li.folder > i').removeClass('fa-folder-close-o').addClass('fa-folder-open-o');$('.subnets ul#subnets li.folderF > i').removeClass('fa-folder').addClass('fa-folder-open');$('.subnets ul#subnets ul.submenu').removeClass('submenu-close').addClass('submenu-open').slideDown('fast');$(this).attr('data-action','open');createCookie('expandfolders','1','365');$(this).removeClass('fa-expand').addClass('fa-compress');}
else{$('.subnets ul#subnets li.folder > i').addClass('fa-folder-close-o').removeClass('fa-folder-open-o');$('.subnets ul#subnets li.folderF > i').addClass('fa-folder').removeClass('fa-folder-open');$('.subnets ul#subnets ul.submenu').addClass('submenu-close').removeClass('submenu-open').slideUp('fast');$(this).attr('data-action','close');createCookie('expandfolders','0','365');$(this).removeClass('fa-compress').addClass('fa-expand');}});$(document).on("click",".modIPaddr",function(){showSpinner();var action=$(this).attr('data-action');var id=$(this).attr('data-id');var subnetId=$(this).attr('data-subnetId');var stopIP=$(this).attr('data-stopIP');var postdata="action="+action+"&id="+id+"&subnetId="+subnetId+"&stopIP="+stopIP;$.post('app/subnets/addresses/address-modify.php',postdata,function(data){$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","a.moveIPaddr",function(){showSpinner();var action=$(this).attr('data-action');var id=$(this).attr('data-id');var subnetId=$(this).attr('data-subnetId');var postdata="action="+action+"&id="+id+"&subnetId="+subnetId;$.post('app/subnets/addresses/move-address.php',postdata,function(data){$('#popupOverlay div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#refreshHostname",function(){showSpinner();var ipaddress=$('input.ip_addr').val();var subnetId=$(this).attr('data-subnetId');;$.post('app/subnets/addresses/address-resolve.php',{ipaddress:ipaddress,subnetId:subnetId},function(data){if(data.length!==0){$('input[name=dns_name]').val(data);}
hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","button#editIPAddressSubmit, .editIPSubmitDelete",function(){showSpinner();var postdata=$('form.editipaddress').serialize();if($(this).attr('id')=="editIPSubmitDelete"){postdata+="&deleteconfirm=yes&action=delete";}
if($(this).attr('data-action')=="all-delete"){postdata+='&action-visual=delete';}
$.post('app/subnets/addresses/address-modify-check.php',postdata,function(data){$('div.addnew_check').html(data);$('div.addnew_check').slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".ping_ipaddress",function(){showSpinner();var id=$(this).attr('data-id');var subnetId=$(this).attr('data-subnetId');if($(this).hasClass("ping_ipaddress_new")){id=$("input[name=ip_addr]").val();}
$.post('app/subnets/addresses/ping-address.php',{id:id,subnetId:subnetId},function(data){$('#popupOverlay2 div.popup_w400').html(data);showPopup('popup_w400',false,true);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","a.mail_ipaddress",function(){var IPid=$(this).attr('data-id');$.post('app/subnets/addresses/mail-notify.php',{id:IPid},function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#mailIPAddressSubmit",function(){showSpinner();var mailData=$('form#mailNotify').serialize();$.post('app/subnets/addresses/mail-notify-check.php',mailData,function(data){$('div.sendmail_check').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","table.ipaddresses th a.sort",function(){showSpinner();$(this).tooltip('hide');var direction=$(this).attr('data-id');var subnetId=$(this).attr('data-subnetId');$.post('app/subnets/addresses/print-address-table.php',{direction:direction,subnetId:subnetId},function(data){$('div.ipaddresses_overlay').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('a.scan_subnet').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post('app/subnets/scan/subnet-scan.php',{subnetId:subnetId},function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('change',"select#type",function(){var pingType=$('select[name=type]').find(":selected").val();if(pingType=="scan-telnet"){$('tbody#telnetPorts').show();}
else{$('tbody#telnetPorts').hide();}});$(document).on('click','#subnetScanSubmit',function(){showSpinner();var subnetId=$(this).attr('data-subnetId');var type=$('select[name=type]').find(":selected").val();if($('input[name=debug]').is(':checked')){var debug=1;}
else{var debug=0;}
var port=$('input[name=telnetports]').val();$('#alert-scan').slideUp('fast');$.post('app/subnets/scan/subnet-scan-execute.php',{subnetId:subnetId,type:type,debug:debug,port:port},function(data){$('#subnetScanResult').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('click','.resultRemove',function(){var target=$(this).attr('data-target');$('tr.'+target).remove();return false;});$(document).on('click','a#saveScanResults',function(){showSpinner();var script=$(this).attr('data-script');var subnetId=$(this).attr('data-subnetId');var postData=$('form.'+script+"-form").serialize();var postData=postData+"&subnetId="+subnetId;$.post('app/subnets/scan/subnet-'+script+"-result.php",postData,function(data){$('#subnetScanAddResult').html(data);reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('a.csvImport').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post('app/subnets/import-subnet/index.php',{subnetId:subnetId},function(data){$('div.popup_max').html(data);showPopup('popup_max');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","input#csvimportcheck",function(){showSpinner();var filetype=$('span.fname').html();$.post('app/subnets/import-subnet/print-file.php',{filetype:filetype},function(data){$('div.csvimportverify').html(data).slideDown('fast');hideSpinner();$('.importFooter').removeClass("hidePopups").addClass("hidePopupsReload");}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","input#csvImportNo",function(){$('div.csvimportverify').hide('fast');});$(document).on("click","input#csvImportYes",function(){showSpinner();var filetype=$('span.fname').html();var xlsSubnetId=$('a.csvImport').attr('data-subnetId');var postData="subnetId="+xlsSubnetId+"&filetype="+filetype;$.post('app/subnets/import-subnet/import-file.php',postData,function(data){$('div.csvImportResult').html(data).slideDown('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","#csvtemplate",function(){$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/subnets/import-subnet/import-template.php'></iframe></div>");return false;});$(document).on("click","#vrftemplate",function(){$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/import-template.php?type=vrf'></iframe></div>");return false;});$(document).on("click","#vlanstemplate",function(){$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/import-template.php?type=vlans'></iframe></div>");return false;});$(document).on("click","#vlandomaintemplate",function(){$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/import-template.php?type=vlandomain'></iframe></div>");return false;});$(document).on("click","#subnetstemplate",function(){$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/import-template.php?type=subnets'></iframe></div>");return false;});$(document).on("click","#ipaddresstemplate",function(){$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/import-template.php?type=ipaddress'></iframe></div>");return false;});$(document).on("click","#devicestemplate",function(){$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/import-template.php?type=devices'></iframe></div>");return false;});$(document).on("click","#devicetypestemplate",function(){$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/import-template.php?type=devicetypes'></iframe></div>");return false;});$('a.csvExport').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post('app/subnets/addresses/export-field-select.php',{subnetId:subnetId},function(data){$('#popupOverlay div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button#exportSubnet",function(){var subnetId=$('a.csvExport').attr('data-subnetId');var exportFields=$('form#selectExportFields').serialize();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/subnets/addresses/export-subnet.php?subnetId="+subnetId+"&"+exportFields+"'></iframe></div>");return false;});$(document).on('click','a.editFavourite',function(){var subnetId=$(this).attr('data-subnetId');var action=$(this).attr('data-action');var from=$(this).attr('data-from');var item=$(this);$.post('app/tools/favourites/favourite-edit.php',{subnetId:subnetId,action:action,from:from},function(data){if(data=='success'&&from=='widget'){$('tr.favSubnet-'+subnetId).addClass('error');$('tr.favSubnet-'+subnetId).delay(200).fadeOut();}
else if(data=='success'){$(this).toggleClass('btn-info');$('a.favourite-'+subnetId+" i").toggleClass('fa-star-o');$(item).toggleClass('btn-info');if(action=="remove"){$('a.favourite-'+subnetId).attr('data-original-title','Click to add to favourites');$(item).attr('data-action','add');}
else{$('a.favourite-'+subnetId).attr('data-original-title','Click to remove from favourites');$(item).attr('data-action','remove');}}
else{$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('a.request_ipaddress').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post('app/tools/request-ip/index.php',{subnetId:subnetId},function(data){$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button#requestIP_widget",function(){showSpinner();var subnetId=$('select#subnetId option:selected').attr('value');var ip_addr=document.getElementById('ip_addr_widget').value;$.post('app/tools/request-ip/index.php',{subnetId:subnetId,ip_addr:ip_addr},function(data){$('div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("change","select#subnetId",function(){showSpinner();var subnetId=$('select#subnetId option:selected').attr('value');$.post('app/login/request_ip_first_free.php',{subnetId:subnetId},function(data){$('input.ip_addr').val(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","button#requestIPAddressSubmit",function(){showSpinner();var request=$('form#requestIP').serialize();$.post('app/login/request_ip_result.php',request,function(data){$('div#requestIPresult').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('form#ipCalc').submit(function(){showSpinner();var ipCalcData=$(this).serialize();$.post('app/tools/ip-calculator/result.php',ipCalcData,function(data){$('div.ipCalcResult').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('form#ipCalc input.reset').click(function(){$('form#ipCalc input[type="text"]').val('');$('div.ipCalcResult').fadeOut('fast');});$('.searchSubmit').click(function(){showSpinner();var ip=$('.searchInput').val();ip=ip.replace(/\//g,"%252F");if($('#searchSelect input[name=addresses]').is(":checked")){var addresses="on";}
else{var addresses="off";}
if($('#searchSelect input[name=subnets]').is(":checked")){var subnets="on";}
else{var subnets="off";}
if($('#searchSelect input[name=vlans]').is(":checked")){var vlans="on";}
else{var vlans="off";}
if($('#searchSelect input[name=vrf]').is(":checked")){var vrf="on";}
else{var vrf="off";}
var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){var base=$('.iebase').html();}
else{var base="";}
var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){window.location=base+"tools/search/"+addresses+"/"+subnets+"/"+vlans+"/"+vrf+"/"+ip;}
else{window.location=base+"?page=tools&section=search&addresses="+addresses+"&subnets="+subnets+"&vlans="+vlans+"&vrf="+vrf+"&ip="+ip;}
return false;});$('form#userMenuSearch').submit(function(){showSpinner();var ip=$('.searchInput').val();ip=ip.replace(/\//g,"%252F");if($('#searchSelect input[name=addresses]').is(":checked")){var addresses="on";}
else{var addresses="off";}
if($('#searchSelect input[name=addresses]').is(":checked")){var subnets="on";}
else{var subnets="off";}
if($('#searchSelect input[name=addresses]').is(":checked")){var vlans="on";}
else{var vlans="off";}
if($('#searchSelect input[name=vrf]').is(":checked")){var vrf="on";}
else{var vrf="off";}
var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){var base=$('.iebase').html();}
else{var base="";}
var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){window.location=base+"tools/search/"+addresses+"/"+subnets+"/"+vlans+"/"+vrf+"/"+ip;}
else{window.location=base+"?page=tools&section=search&addresses="+addresses+"&subnets="+subnets+"&vlans="+vlans+"&vrf="+vrf+"&ip="+ip;}
return false;});$(document).on("mouseenter","#userMenuSearch",function(event){var object1=$("#searchSelect");object1.slideDown('fast');});$(document).on("mouseleave",'#user_menu',function(event){$(this).stop();var object1=$("#searchSelect");object1.slideUp();});$('form#search').submit(function(){showSpinner();var ip=$('form#search .search').val();var postData=$(this).serialize();$.post('app/tools/search/search-results.php',postData,function(data){$('div.searchResult').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#exportSearch",function(event){var searchTerm=$(this).attr('data-post');$("div.dl").remove();$('div.exportDIVSearch').append("<div style='display:none' class='dl'><iframe src='app/tools/search/search-results-export.php?"+searchTerm+"'></iframe></div>");return false;});$('#hosts').submit(function(){showSpinner();var hostname=$('input.hostsFilter').val();var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){window.location=base+"tools/hosts/"+hostname;}
else{window.location=base+"?page=tools&section=hosts&ip="+hostname;}
return false;});$('form#userModSelf').submit(function(){var selfdata=$(this).serialize();$('div.userModSelfResult').hide();$.post('app/tools/user-menu/user-edit.php',selfdata,function(data){$('div.userModSelfResult').html(data).fadeIn('fast').delay(2000).fadeOut('slow');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#randomPassSelf",function(){var password=randomPass();$('input.userPass').val(password);$('#userRandomPass').html(password);return false;});$('form#cform').submit(function(){showSpinner();var limit=$('form#cform .climit').val();var filter=$('form#cform .cfilter').val();var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){window.location="tools/changelog/"+filter+"/"+limit+"/";}
else{window.location="?page=tools&section=changelog&subnetId="+filter+"&sPage="+limit;}
return false;});$('form#changePassRequiredForm').submit(function(){showSpinner();var ipampassword1=$('#ipampassword1',this).val();var ipampassword2=$('#ipampassword2',this).val();var postData="ipampassword1="+ipampassword1+"&ipampassword2="+ipampassword2;$.post('app/tools/pass-change/result.php',postData,function(data){$('div#changePassRequiredResult').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","table#switchManagement th a.sort",function(){showSpinner();$(this).tooltip('hide');var direction=$(this).attr('data-id');$.post('app/tools/devices/devices-print.php',{direction:direction},function(data){$('div.devicePrintHolder').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('submit',"#deviceFilter",function(){var searchData=$(this).serialize();$.post('app/tools/devices/devices-print.php',searchData,function(data){$('div.devicePrintHolder').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",'.show-masks',function(){open_popup("masks","app/tools/subnet-masks/popup.php",{closeClass:$(this).attr('data-closeClass')},true);return false;});$('#settings').submit(function(){showSpinner();var settings=$(this).serialize();$.post('app/admin/settings/settings-save.php',settings,function(data){$('div.settingsEdit').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#mailsettings').submit(function(){showSpinner();var settings=$(this).serialize();$.post('app/admin/mail/edit.php',settings,function(data){$('div.settingsMailEdit').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('select#mtype').change(function(){var type=$(this).find(":selected").val();if(type==="localhost"){$('#mailsettingstbl tbody#smtp').hide();}
else{$('#mailsettingstbl tbody#smtp').show();}});$('.sendTestMail').click(function(){showSpinner();var settings=$('form#mailsettings').serialize();$.post('app/admin/mail/test-mail.php',settings,function(data){$('div.settingsMailEdit').html(data).slideDown('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.editUser').click(function(){showSpinner();var id=$(this).attr('data-userid');var action=$(this).attr('data-action');$.post('app/admin/users/edit.php',{id:id,action:action},function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editUserSubmit",function(){showSpinner();var loginData=$('form#usersEdit').serialize();$.post('app/admin/users/edit-result.php',loginData,function(data){$('div.usersEditResult').html(data).show();reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("change","form#usersEdit select[name=authMethod]",function(){var type=$("select[name=authMethod]").find(":selected").val();if(type=="1"){$('tbody#user_password').show();}
else{$('tbody#user_password').hide();}});$(document).on("change","form#usersEdit select[name=role]",function(){var type=$("form#usersEdit select[name=role]").find(":selected").val();if(type=="Administrator"){$('tbody#user_notifications').show();}
else{$('tbody#user_notifications').hide();}});$(document).on("click","a#randomPass",function(){var password=randomPass();$('input.userPass').val(password);$(this).html(password);return false;});$(document).on("click",".adsearchuser",function(){$('#popupOverlay2 .popup_w500').load('app/admin/users/ad-search-form.php');showPopup('popup_w500',false,true);hideSpinner();});$(document).on("click","#adsearchusersubmit",function(){showSpinner();var dname=$('#dusername').val();var server=$('#adserver').find(":selected").val();$.post('app/admin/users/ad-search-result.php',{dname:dname,server:server},function(data){$('div#adsearchuserresult').html(data)
hideSpinner();});});$(document).on("click",".userselect",function(){var uname=$(this).attr('data-uname');var username=$(this).attr('data-username');var email=$(this).attr('data-email');var server=$(this).attr('data-server');var server_type=$(this).attr('data-server-type');$('form#usersEdit input[name=real_name]').val(uname);$('form#usersEdit input[name=username]').val(username);$('form#usersEdit input[name=email]').val(email);$('form#usersEdit select[name=authMethod]').val(server);$('tbody#user_password').hide();if(server_type=="AD"||server_type=="LDAP"){$.post('app/admin/users/ad-search-result-groups-membership.php',{server:server,username:username},function(data){if(data.length>0){var groups=data.replace(/\s/g,'');groups=groups.split(";");for(m=0;m<groups.length;++m){$("input[name='group"+groups[m]+"']").attr('checked',"checked");}}});}
hidePopup2();return false;});$(document).on("click",".adLookup",function(){$('#popupOverlay div.popup_w700').load('app/admin/groups/ad-search-group-form.php');showPopup('popup_w700');hideSpinner();});$(document).on("click","#adsearchgroupsubmit",function(){showSpinner();var dfilter=$('#dfilter').val();var server=$('#adserver').find(":selected").val();$.post('app/admin/groups/ad-search-group-result.php',{dfilter:dfilter,server:server},function(data){$('div#adsearchgroupresult').html(data)
hideSpinner();});});$(document).on("click",".groupselect",function(){showSpinner();var gname=$(this).attr("data-gname");var gdescription=$(this).attr("data-gdescription");var gmembers=$(this).attr("data-members");var gid=$(this).attr("data-gid");$.post('app/admin/groups/edit-group-result.php',{action:"add",g_name:gname,g_desc:gdescription,gmembers:gmembers},function(data){$('div.adgroup-'+gid).html(data)
hideSpinner();});return false;});$('.editGroup').click(function(){showSpinner();var id=$(this).attr('data-groupid');var action=$(this).attr('data-action');$.post('app/admin/groups/edit-group.php',{id:id,action:action},function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editGroupSubmit",function(){showSpinner();var loginData=$('form#groupEdit').serialize();$.post('app/admin/groups/edit-group-result.php',loginData,function(data){$('div.groupEditResult').html(data).show();reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.addToGroup').click(function(){showSpinner();var g_id=$(this).attr('data-groupid');$.post('app/admin/groups/add-users.php',{g_id:g_id},function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#groupAddUsersSubmit",function(){showSpinner();var users=$('#groupAddUsers').serialize();$.post('app/admin/groups/add-users-result.php',users,function(data){$('div.groupAddUsersResult').html(data).show();reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.removeFromGroup').click(function(){showSpinner();var g_id=$(this).attr('data-groupid');$.post('app/admin/groups/remove-users.php',{g_id:g_id},function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#groupRemoveUsersSubmit",function(){showSpinner();var users=$('#groupRemoveUsers').serialize();$.post('app/admin/groups/remove-users-result.php',users,function(data){$('div.groupRemoveUsersResult').html(data).show();reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.editAuthMethod').click(function(){showSpinner();var id=$(this).attr('data-id');var action=$(this).attr('data-action');var type=$(this).attr('data-type');$.post('app/admin/authentication-methods/edit.php',{id:id,action:action,type:type},function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editAuthMethodSubmit",function(){showSpinner();var loginData=$('form#editAuthMethod').serialize();$.post('app/admin/authentication-methods/edit-result.php',loginData,function(data){$('div.editAuthMethodResult').html(data).show();reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.checkAuthMethod').click(function(){showSpinner();var id=$(this).attr('data-id');$.post('app/admin/authentication-methods/check-connection.php',{id:id},function(data){$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#instructionsForm').submit(function(){var csrf_cookie=$("#instructionsForm input[name=csrf_cookie]").val();var instructions=CKEDITOR.instances.instructions.getData();$('div.instructionsPreview').hide('fast');showSpinner();$.post('app/admin/instructions/edit-result.php',{instructions:instructions,csrf_cookie:csrf_cookie},function(data){$('div.instructionsResult').html(data).fadeIn('fast');if(data.search("alert-danger")==-1&&data.search("error")==-1){$('div.instructionsResult').delay(2000).fadeOut('slow');hideSpinner();}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#preview').click(function(){showSpinner();var instructions=CKEDITOR.instances.instructions.getData();$.post('app/admin/instructions/preview.php',{instructions:instructions},function(data){$('div.instructionsPreview').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('form#logs').change(function(){showSpinner();var logSelection=$('form#logs').serialize();$.post('app/tools/logs/show-logs.php',logSelection,function(data){$('div.logs').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","a.openLogDetail",function(){var id=$(this).attr('data-logid');$.post('app/tools/logs/detail-popup.php',{id:id},function(data){$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#logDirection button').click(function(){showSpinner();var logSelection=$('form#logs').serialize();var direction=$(this).attr('data-direction');var lastId;if(direction=="next"){lastId=$('table#logs tr:last').attr('id');}
else{lastId=$('table#logs tr:nth-child(2)').attr('id');}
var postData=logSelection+"&direction="+direction+"&lastId="+lastId;$.post('app/tools/logs/show-logs.php',postData,function(data1){$('div.logs').html(data1);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#downloadLogs').click(function(){showSpinner();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/logs/export.php'></iframe></div>");hideSpinner();$('div.logs').prepend("<div class='alert alert-info' id='logsInfo'><i class='icon-remove icon-gray selfDestruct'></i> Preparing download... </div>");return false;});$('#clearLogs').click(function(){showSpinner();$.post('app/tools/logs/clear-logs.php',function(data){$('div.logs').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.log-tabs li a').click(function(){$('.log-tabs li').removeClass("active");$(this).parent('li').addClass("active");$('div.log-print').hide();$('div.'+$(this).attr("data-target")).show();return false;});$('button.editSection').click(function(){showSpinner();var sectionId=$(this).attr('data-sectionid');var action=$(this).attr('data-action');$.post("app/admin/sections/edit.php",{sectionId:sectionId,action:action},function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","#editSectionSubmit, .editSectionSubmitDelete",function(){showSpinner();var sectionData=$('form#sectionEdit').serialize();if($(this).attr('id')=="editSectionSubmitDelete"){sectionData+="&deleteconfirm=yes";};$.post('app/admin/sections/edit-result.php',sectionData,function(data){$('div.sectionEditResult').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.sectionOrder').click(function(){showSpinner();$.post("app/admin/sections/edit-order.php",function(data){$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#sectionOrderSubmit",function(){showSpinner();var m=0;var lis=$('#sortableSec li').map(function(i,n){var pindex=$(this).index()+1;return $(n).attr('id')+":"+pindex;}).get().join(';');$.post('app/admin/sections/edit-order-result.php',{position:lis},function(data){$('.sectionOrderResult').html(data).fadeIn('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#pdns-settings').submit(function(){showSpinner();var settings=$(this).serialize();$.post('app/admin/powerDNS/settings-save.php',settings,function(data){$('div.settingsEdit').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('#pdns-defaults').submit(function(){showSpinner();var settings=$(this).serialize();$.post('app/admin/powerDNS/defaults-save.php',settings,function(data){$('div.settingsEdit').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editDomain",function(){if($(this).hasClass('editDomain2')){open_popup("700","app/admin/powerDNS/domain-edit.php",{id:$(this).attr('data-id'),action:$(this).attr('data-action'),secondary:true},true);}
else{open_popup("700","app/admin/powerDNS/domain-edit.php",{id:$(this).attr('data-id'),action:$(this).attr('data-action')});}});$(document).on("click",".hideDefaults",function(){if($(this).is(':checked')){$("tbody.defaults").hide();}
else{$("tbody.defaults").show();}});$(document).on("click","#editDomainSubmit",function(){if($(this).hasClass('editDomainSubmit2')){showSpinner();$.post("app/admin/powerDNS/domain-edit-result.php",$('form#domainEdit').serialize(),function(data){$('#popupOverlay2 div.domain-edit-result').html(data).slideDown('fast');if(data.search("alert-danger")==-1&&data.search("error")==-1&&data.search("alert-warning")==-1){$.post("app/admin/powerDNS/record-edit.php",{id:$('#popupOverlay .pContent .ip_dns_addr').html(),domain_id:$('#popupOverlay .pContent strong').html(),action:"add"},function(data2){$("#popupOverlay .popup_w700").html(data2);});setTimeout(function(){$('#popupOverlay2').fadeOut('fast');},1500);setTimeout(function(){hideSpinner();},1500);}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;}
else{submit_popup_data(".domain-edit-result","app/admin/powerDNS/domain-edit-result.php",$('form#domainEdit').serialize());}});$('.refreshPTRsubnet').click(function(){open_popup("700","app/admin/powerDNS/refresh-ptr-records.php",{subnetId:$(this).attr('data-subnetId')});return false;});$(document).on("click",".refreshPTRsubnetSubmit",function(){submit_popup_data(".refreshPTRsubnetResult","app/admin/powerDNS/refresh-ptr-records-submit.php",{subnetId:$(this).attr('data-subnetId')});return false;});$(".editRecord").click(function(){open_popup("700","app/admin/powerDNS/record-edit.php",{id:$(this).attr('data-id'),domain_id:$(this).attr('data-domain_id'),action:$(this).attr('data-action')});return false;});$(document).on("click","#editRecordSubmit",function(){submit_popup_data(".record-edit-result","app/admin/powerDNS/record-edit-result.php",$('form#recordEdit').serialize());});$(document).on("click","#editRecordSubmitDelete",function(){var formData=$('form#recordEdit').serialize();formData=formData.replace("action=edit","action=delete");submit_popup_data(".record-edit-result","app/admin/powerDNS/record-edit-result.php",formData);});$('#firewallZoneSettings').submit(function(){showSpinner();var settings=$(this).serialize();$.post('app/admin/firewall-zones/settings-save.php',settings,function(data){$('div.settingsEdit').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editFirewallZone",function(){open_popup("700","app/admin/firewall-zones/zones-edit.php",{id:$(this).attr('data-id'),action:$(this).attr('data-action')});});$(document).on("click","#editZoneSubmit",function(){submit_popup_data(".zones-edit-result","app/admin/firewall-zones/zones-edit-result.php",$('form#zoneEdit').serialize());});$(document).on("click",".subnet_to_zone",function(){showSpinner();var subnetId=$(this).attr('data-subnetId');var operation=$(this).attr('data-operation');var postdata="operation="+operation+"&subnetId="+subnetId;$.post('app/admin/firewall-zones/subnet-to-zone.php',postdata,function(data){$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#subnet-to-zone-submit",function(){submit_popup_data(".subnet-to-zone-result","app/admin/firewall-zones/subnet-to-zone-save.php",$('form#subnet-to-zone-edit').serialize());});$(document).on("change",".checkMapping",(function(){showSpinner();var pData=$(this).serializeArray();pData.push({name:'operation',value:'checkMapping'});$.post('app/admin/firewall-zones/ajax.php',pData,function(data){$('div.mappingAdd').html(data).slideDown('fast');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});hideSpinner();return false;}));$(document).on("click",".editNetwork",function(){var pData=$('form#zoneEdit').serializeArray();pData.push({name:'action',value:$(this).attr('data-action')});pData.push({name:'subnetId',value:$(this).attr('data-subnetId')});$('#popupOverlay2 .popup_w500').load('app/admin/firewall-zones/zones-edit-network.php',pData);showPopup('popup_w500',false,true);hideSpinner();});$(document).on("click",".deleteTempNetwork",function(){showSpinner();var filterName='network['+$(this).attr("data-subnetArrayKey")+']';var pData=$('form#zoneEdit :input[name != "'+filterName+'"][name *= "network["]').serializeArray();pData.push({name:'noZone',value:1});$.post("app/admin/firewall-zones/ajax.php",pData,function(data){$('div'+".zoneNetwork").html(data).slideDown('fast');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});setTimeout(function(){hideSpinner();},500);return false;});$(document).on("click","#editNetworkSubmit",function(){showSpinner();reload=typeof reload!=='undefined'?reload:true;$.post("app/admin/firewall-zones/zones-edit-network-result.php",$('form#networkEdit :input[name != "sectionId"]').serialize(),function(data){$('div'+".zones-edit-network-result").html(data).slideDown('fast');if(reload){if(data.search("alert-danger")==-1&&data.search("error")==-1&&data.search("alert-warning")==-1){$.post("app/admin/firewall-zones/ajax.php",$('form#networkEdit :input[name != "sectionId"]').serialize(),function(data){$('div'+".zoneNetwork").html(data).slideDown('fast');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});setTimeout(function(){hideSpinner();hidePopup2();},500);}else{hideSpinner();}}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("change",".firewallZoneSection",(function(){showSpinner();var pData=$(this).serializeArray();pData.push({name:'operation',value:'fetchSectionSubnets'});$.post('app/admin/firewall-zones/ajax.php',pData,function(data){$('div.sectionSubnets').html(data).slideDown('fast');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});hideSpinner();return false;}));$(document).on("click",".editMapping",function(){open_popup("700","app/admin/firewall-zones/mapping-edit.php",{id:$(this).attr('data-id'),action:$(this).attr('data-action')});return false;});$(document).on("click","#editMappingSubmit",function(){submit_popup_data(".mapping-edit-result","app/admin/firewall-zones/mapping-edit-result.php",$('form#mappingEdit').serialize());});$(document).on("change",".mappingZoneInformation",(function(){showSpinner();var pData=$(this).serializeArray();pData.push({name:'operation',value:'deliverZoneDetail'});$.post('app/admin/firewall-zones/ajax.php',pData,function(data){$('div.zoneInformation').html(data).slideDown('fast');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});hideSpinner();return false;}));$(document).on("click","a.fw_autogen",function(){var subnetId=$(this).attr('data-subnetid');var IPId=$(this).attr('data-ipid');var dnsName=$(this).attr('data-dnsname');var action=$(this).attr('data-action');var operation='autogen';showSpinner();$.post('app/admin/firewall-zones/ajax.php',{subnetId:subnetId,IPId:IPId,dnsName:dnsName,action:action,operation:operation}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});setTimeout(function(){hideSpinner();window.location.reload();},500);return false;});$('table#manageSubnets button[id^="subnet-"]').click(function(){showSpinner();var swid=$(this).attr('id');if($('#content-'+swid).is(':visible')){$(this).children('i').removeClass('fa-angle-down').addClass('fa-angle-right');}
else{$(this).children('i').removeClass('fa-angle-right').addClass('fa-angle-down');}
$('table#manageSubnets tbody#content-'+swid).slideToggle('fast');hideSpinner();});$('#toggleAllSwitches').click(function(){showSpinner();if($(this).children().hasClass('fa-compress')){$(this).children().removeClass('fa-compress').addClass('fa-expand');$('table#manageSubnets i.fa-angle-down').removeClass('fa-angle-down').addClass('fa-angle-right');$('table#manageSubnets tbody[id^="content-subnet-"]').hide();createCookie('showSubnets',0,30);}
else{$(this).children().removeClass('fa-expand').addClass('fa-compress');$('table#manageSubnets tbody[id^="content-subnet-"]').show();$('table#manageSubnets i.fa-angle-right').removeClass('fa-angle-right').addClass('fa-angle-down');createCookie('showSubnets',1,30);}
hideSpinner();});$('button.editSubnet').click(function(){showSpinner();var sectionId=$(this).attr('data-sectionid');var subnetId=$(this).attr('data-subnetid');var action=$(this).attr('data-action');var postdata="sectionId="+sectionId+"&subnetId="+subnetId+"&action="+action;$.post("app/admin/subnets/edit.php",postdata,function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click","#resize, #split, #truncate",function(){showSpinner();var action=$(this).attr('id');var subnetId=$(this).attr('data-subnetId');$.post("app/admin/subnets/"+action+".php",{action:action,subnetId:subnetId},function(data){showPopup('popup_w500',data,true);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button#subnetResizeSubmit",function(){showSpinner();var resize=$('form#subnetResize').serialize();$.post("app/admin/subnets/resize-save.php",resize,function(data){$('div.subnetResizeResult').html(data);reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button#subnetSplitSubmit",function(){showSpinner();var split=$('form#subnetSplit').serialize();$.post("app/admin/subnets/split-save.php",split,function(data){$('div.subnetSplitResult').html(data);reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","button#subnetTruncateSubmit",function(){showSpinner();var subnetId=$(this).attr('data-subnetId');$.post("app/admin/subnets/truncate-save.php",{subnetId:subnetId},function(data){$('div.subnetTruncateResult').html(data);reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("submit","#editSubnetDetails",function(){return false;});$(document).on("click",".editSubnetSubmit, .editSubnetSubmitDelete",function(){showSpinner();var subnetData=$('form#editSubnetDetails').serialize();if($(this).hasClass("editSubnetSubmitDelete")){subnetData=subnetData.replace("action=edit","action=delete");}
if($(this).attr('id')=="editSubnetSubmitDelete"){subnetData+="&deleteconfirm=yes";};$.post("app/admin/subnets/edit-result.php",subnetData,function(data){$('div.manageSubnetEditResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1&&data.search("error")==-1){showSpinner();var sectionId;var subnetId;var parameter;if(subnetData.search("IPaddresses")!=-1){sectionId=$('form#editSubnetDetails input[name=sectionId]').val();subnetId=$('form#editSubnetDetails input[name=subnetId]').val();if($(".subnet_id_new").html()!=="undefined"){var subnet_id_new=$(".subnet_id_new").html();if(subnet_id_new%1===0){var section_id_new=$(".section_id_new").html();var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){var base=$('.iebase').html();}
else{var base="";}
var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){setTimeout(function(){window.location=base+"subnets/"+section_id_new+"/"+subnet_id_new+"/";},1500);}
else{setTimeout(function(){window.location=base+"?page=subnets&section="+section_id_new+"&subnetId="+subnet_id_new;},1500);}}
else{setTimeout(function(){window.location.reload();},1500);}}
else{setTimeout(function(){window.location.reload();},1500);}}
else if(subnetData.search("freespace")!=-1){setTimeout(function(){window.location.reload();},1500);}
else if(subnetData.search("ipcalc")!=-1){}
else{setTimeout(function(){window.location.reload();},1500);}}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#get-ripe",function(){showSpinner();var subnet=$('form#editSubnetDetails input[name=subnet]').val();$.post("app/admin/subnets/ripe-query.php",{subnet:subnet},function(data){showPopup('popup_w500',data,true);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('click',"#ripeMatchSubmit",function(){var cfields_temp=$('form#ripe-fields').serialize();var cfields=cfields_temp.split("&");for(index=0;index<cfields.length;++index){if(cfields[index].indexOf("=0")>-1){}
else{console.log(cfields[index]);var cdata=cfields[index].split("=");$('form#editSubnetDetails input[name='+cdata[1]+']').val(cdata[0].replace(/___/g," "));}}
hidePopup2();});$('.showSubnetPerm').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');var sectionId=$(this).attr('data-sectionId');$.post("app/admin/subnets/permissions-show.php",{subnetId:subnetId,sectionId:sectionId},function(data){$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editSubnetPermissionsSubmit",function(){showSpinner();var perms=$('form#editSubnetPermissions').serialize();$.post('app/admin/subnets/permissions-submit.php',perms,function(data){$('.editSubnetPermissionsResult').html(data);reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".dropdown-subnets li a",function(){var subnet=$(this).attr('data-cidr');var inputfield=$('form#editSubnetDetails input[name=subnet]');$(inputfield).val(subnet);$('.dropdown-subnets').parent().removeClass("open");return false;});$(document).on("click","#createSubnetFromCalc",function(){$('tr#selectSection').show();});$(document).on("change","select#selectSectionfromIPCalc",function(){var sectionId=$(this).val();var subnet=$('table.ipCalcResult td#sub2').html();var bitmask=$('table.ipCalcResult td#sub4').html();if($("table.ipCalcResult td#sub0").html()=="IPv6"){var postdata="sectionId="+sectionId+"&subnet="+$('table.ipCalcResult td#sub3').html()+"&bitmask=&action=add&location=ipcalc";}else{var postdata="sectionId="+sectionId+"&subnet="+subnet+"&bitmask="+bitmask+"&action=add&location=ipcalc";}
$('table.newSections ul#sections li#'+sectionId).addClass('active');$.post('app/admin/subnets/edit.php',postdata,function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});});$(document).on("click",".createfromfree",function(){var sectionId=$(this).attr('data-sectionId');var cidr=$(this).attr('data-cidr');var freespaceMSISD=$(this).attr('data-masterSubnetId');var cidrArr=cidr.split('/');var subnet=cidrArr[0];var bitmask=cidrArr[1];var postdata="sectionId="+sectionId+"&subnet="+subnet+"&bitmask="+bitmask+"&freespaceMSID="+freespaceMSISD+"&action=add&location=ipcalc";$.post('app/admin/subnets/edit.php',postdata,function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",'.edit_subnet, button.edit_subnet, button#add_subnet',function(){var subnetId=$(this).attr('data-subnetId');var sectionId=$(this).attr('data-sectionId');var action=$(this).attr('data-action');var postdata="sectionId="+sectionId+"&subnetId="+subnetId+"&action="+action+"&location=IPaddresses";$.post('app/admin/subnets/edit.php',postdata,function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("change","select[name=vlanId]",function(){var domain=$("select[name=vlanId] option:selected").attr('data-domain');if($(this).val()=='Add'){showSpinner();$.post('app/admin/vlans/edit.php',{action:"add",fromSubnet:"true",domain:domain},function(data){showPopup('popup_w400',data,true);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}
return false;});$(document).on("click",".vlanManagementEditFromSubnetButton",function(){showSpinner();var postData=$('form#vlanManagementEditFromSubnet').serialize();$.post('app/admin/vlans/edit-result.php',postData,function(data){$('div.vlanManagementEditFromSubnetResult').html(data).show();if(data.search("alert-danger")==-1&&data.search("error")==-1){var vlanId=$('#vlanidforonthefly').html();var sectionId=$('#editSubnetDetails input[name=sectionId]').val();$.post('app/admin/subnets/edit-vlan-dropdown.php',{vlanId:vlanId,sectionId:sectionId},function(data){$('.editSubnetDetails td#vlanDropdown').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});setTimeout(function(){hidePopup('popup_w400',true);hidePopup2();parameter=null;},1000);}
else{hideSpinner();}});return false;});$('.vlansearchsubmit').click(function(){showSpinner();var search=$('input.vlanfilter').val();var location=$('input.vlanfilter').attr('data-location');var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){setTimeout(function(){window.location=location+search+"/";},500);}
else{setTimeout(function(){window.location=location+"&sPage="+search;},500);}
var prettyLinks=$('#prettyLinks').html();if(prettyLinks=="Yes"){setTimeout(function(){window.location=base+"subnets/"+section_id_new+"/"+subnet_id_new+"/";},1500);}
else{setTimeout(function(){window.location=base+"?page=subnets&section="+section_id_new+"&subnetId="+subnet_id_new;},1500);}
return false;});$('#add_folder, .add_folder').click(function(){showSpinner();var subnetId=$(this).attr('data-subnetId');var sectionId=$(this).attr('data-sectionId');var action=$(this).attr('data-action');var postdata="sectionId="+sectionId+"&subnetId="+subnetId+"&action="+action+"&location=IPaddresses";$.post('app/admin/subnets/edit-folder.php',postdata,function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editFolderSubmit",function(){showSpinner();var postData=$('form#editFolderDetails').serialize();$.post('app/admin/subnets/edit-folder-result.php',postData,function(data){$('.manageFolderEditResult').html("").html(data);reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editFolderSubmitDelete",function(){showSpinner();var subnetId=$(this).attr('data-subnetId');var description=$('form#editFolderDetails #field-description').val();var csrf_cookie=$('form#editFolderDetails input[name=csrf_cookie]').val();var postData="subnetId="+subnetId+"&description="+description+"&action=delete"+"&csrf_cookie="+csrf_cookie;if($(this).attr('id')=="editFolderSubmitDelete"){postData+="&deleteconfirm=yes";};$.post('app/admin/subnets/edit-folder-result.php',postData,function(data){$('.manageFolderEditResult').html(data);reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".editSwitch",function(){open_popup("400","app/admin/devices/edit.php",{switchId:$(this).attr('data-switchid'),action:$(this).attr('data-action')});});$(document).on("click","#editSwitchsubmit",function(){submit_popup_data(".switchManagementEditResult","app/admin/devices/edit-result.php",$('form#switchManagementEdit').serialize());});$(document).on("click",".editDevType",function(){open_popup("400","app/admin/device-types/edit.php",{tid:$(this).attr('data-tid'),action:$(this).attr('data-action')});});$(document).on("click","#editDevTypeSubmit",function(){submit_popup_data(".devTypeEditResult","app/admin/device-types/edit-result.php",$('form#devTypeEdit').serialize());});$('.editType').click(function(){open_popup("400","app/admin/tags/edit.php",{id:$(this).attr('data-id'),action:$(this).attr('data-action')});});$(document).on("click","#editTypesubmit",function(){submit_popup_data(".editTypeResult","app/admin/tags/edit-result.php",$('form#editType').serialize());});$(document).on("click",".editVLAN",function(){vlanNum=$(this).attr("data-number")?$(this).attr('data-number'):"";open_popup("400","app/admin/vlans/edit.php",{vlanId:$(this).attr('data-vlanid'),action:$(this).attr('data-action'),vlanNum:vlanNum,domain:$(this).attr('data-domain')});});$(document).on("click","#editVLANsubmit",function(){submit_popup_data(".vlanManagementEditResult","app/admin/vlans/edit-result.php",$('form#vlanManagementEdit').serialize());});$(".moveVLAN").click(function(){open_popup("400","app/admin/vlans/move-vlan.php",{vlanId:$(this).attr('data-vlanid')});});$(document).on("click","#moveVLANsubmit",function(){submit_popup_data(".moveVLANSubmitResult","app/admin/vlans/move-vlan-result.php",$('form#moveVLAN').serialize());});$('.editVLANdomain').click(function(){open_popup("400","app/admin/vlans/edit-domain.php",{id:$(this).attr('data-domainid'),action:$(this).attr('data-action')});});$(document).on("click","#editVLANdomainsubmit",function(){submit_popup_data(".domainEditResult","app/admin/vlans/edit-domain-result.php",$('form#editVLANdomain').serialize());});$('.vrfManagement').click(function(){open_popup("400","app/admin/vrfs/edit.php",{vrfId:$(this).attr('data-vrfid'),action:$(this).attr('data-action')});});$(document).on("click","#editVRF",function(){submit_popup_data(".vrfManagementEditResult","app/admin/vrfs/edit-result.php",$('form#vrfManagementEdit').serialize());});$('.nameserverManagement').click(function(){open_popup("700","app/admin/nameservers/edit.php",{nameserverId:$(this).attr('data-nameserverid'),action:$(this).attr('data-action')});});$(document).on("click","#add_nameserver",function(){showSpinner();var num=$(this).attr("data-id");$('table#nameserverManagementEdit2 tbody#nameservers').append("<tr id='namesrv-"+num+"'><td>Nameserver "+num+"</td><td><input type='text' class='rd form-control input-sm' name='namesrv-"+num+"'></input><td><button class='btn btn-sm btn-default' id='remove_nameserver' data-id='namesrv-"+num+"'><i class='fa fa-trash-o'></i></buttom></td></td></tr>");num++;$(this).attr("data-id",num);hideSpinner();return false;});$(document).on("click","#remove_nameserver",function(){showSpinner();var id=$(this).attr("data-id");var el=document.getElementById(id);el.parentNode.removeChild(el);hideSpinner();return false;});$(document).on("click","#editNameservers",function(){submit_popup_data(".nameserverManagementEditResult","app/admin/nameservers/edit-result.php",$('form#nameserverManagementEdit').serialize());});$('table#requestedIPaddresses button').click(function(){open_popup("700","app/admin/requests/edit.php",{requestId:$(this).attr('data-requestid')});});$(document).on("click","button.manageRequest",function(){var postValues=$('form.manageRequestEdit').serialize();var action=$(this).attr('data-action');var postData=postValues+"&action="+action;submit_popup_data(".manageRequestResult","app/admin/requests/edit-result.php",postData);});$('.shareTemp').click(function(){open_popup("700","app/tools/temp-shares/edit.php",{type:$(this).attr('data-type'),id:$(this).attr('data-id')});return false;});$(document).on("click","#shareTempSubmit",function(){submit_popup_data(".shareTempSubmitResult","app/tools/temp-shares/edit-result.php",$('form#shareTempEdit').serialize());});$('.removeSharedTemp').click(function(){showPopup("popup_w400");submit_popup_data("#popupOverlay .popup_w400","app/tools/temp-shares/delete-result.php",{code:$(this).attr('data-code')});hideSpinner();});$('form#ripeImport').submit(function(){showSpinner();var as=$(this).serialize();$.post('app/admin/ripe-import/ripe-telnet.php',as,function(data){$('div.ripeImportTelnet').html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","table.asImport .removeSubnet",function(){$(this).parent('tr').remove();hideTooltips();});$(document).on("submit","form#asImport",function(){showSpinner();var importData=$(this).serialize();$.post('app/admin/ripe-import/import-subnets.php',importData,function(data){$('div.ripeImportResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1&&data.search("error")==-1){$('table.asImport').delay(1000).fadeOut('fast');hideSpinner();}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button#filterIPSave').click(function(){showSpinner();var addata=$('form#filterIP').serialize();$.post('app/admin/filter-fields/filter-result.php',addata,function(data){$('div.filterIPResult').html(data).slideDown('fast');if(data.search("alert-danger")==-1&&data.search("error")==-1){$('div.filterIPResult').delay(2000).fadeOut('slow');hideSpinner();}
else{hideSpinner();}}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click",".edit-custom-field",function(){showSpinner();var action=$(this).attr('data-action');var fieldName=$(this).attr('data-fieldname');var table=$(this).attr('data-table');$.post('app/admin/custom-fields/edit.php',{action:action,fieldName:fieldName,table:table},function(data){$('#popupOverlay div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editcustomSubmit",function(){showSpinner();var field=$('form#editCustomFields').serialize();$.post('app/admin/custom-fields/edit-result.php',field,function(data){$('div.customEditResult').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('table.customIP button.down').click(function(){showSpinner();var current=$(this).attr('data-fieldname');var next=$(this).attr('data-nextfieldname');var table=$(this).attr('data-table');$.post('app/admin/custom-fields/order.php',{current:current,next:next,table:table},function(data){$('div.'+table+'-order-result').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.edit-custom-filter').click(function(){showSpinner();var table=$(this).attr('data-table');$.post('app/admin/custom-fields/filter.php',{table:table},function(data){$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#editcustomFilterSubmit",function(){showSpinner();var field=$('form#editCustomFieldsFilter').serialize();$.post('app/admin/custom-fields/filter-result.php',field,function(data){$('div.customEditFilterResult').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.lang').click(function(){showSpinner();var langid=$(this).attr('data-langid');var action=$(this).attr('data-action');$.post('app/admin/languages/edit.php',{langid:langid,action:action},function(data){$('#popupOverlay div.popup_w400').html(data);showPopup('popup_w400');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#langEditSubmit",function(){showSpinner();var ldata=$('form#langEdit').serialize();$.post('app/admin/languages/edit-result.php',ldata,function(data){$('div.langEditResult').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.wedit').click(function(){showSpinner();var wid=$(this).attr('data-wid');var action=$(this).attr('data-action');$.post('app/admin/widgets/edit.php',{wid:wid,action:action},function(data){$('#popupOverlay div.popup_w500').html(data);showPopup('popup_w500');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#widgetEditSubmit",function(){showSpinner();var ldata=$('form#widgetEdit').serialize();$.post('app/admin/widgets/edit-result.php',ldata,function(data){$('div.widgetEditResult').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button.editAPI').click(function(){showSpinner();var appid=$(this).attr('data-appid');var action=$(this).attr('data-action');$.post('app/admin/api/edit.php',{appid:appid,action:action},function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on("click","#apiEditSubmit",function(){showSpinner();var apidata=$('form#apiEdit').serialize();$.post('app/admin/api/edit-result.php',apidata,function(data){$('div.apiEditResult').html(data).slideDown('fast');reload_window(data);}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('click',"#regApiKey",function(){showSpinner();$.post('app/admin/api/generate-key.php',function(data){$('input#appcode').val(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('.editAgent').click(function(){open_popup("700","app/admin/scan-agents/edit.php",{id:$(this).attr('data-id'),action:$(this).attr('data-action')});});$(document).on("click","#agentEditSubmit",function(){submit_popup_data(".agentEditResult","app/admin/scan-agents/edit-result.php",$('form#agentEdit').serialize());});$(document).on('click',"#regAgentKey",function(){showSpinner();$.post('app/admin/api/generate-key.php',function(data){$('input[name=code]').val(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button#searchReplaceSave').click(function(){showSpinner();var searchData=$('form#searchReplace').serialize();$.post('app/admin/replace-fields/result.php',searchData,function(data){$('div.searchReplaceResult').html(data);hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$('button#XLSdump').click(function(){showSpinner();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/generate-xls.php'></iframe></div>");hideSpinner();});$('button#MySQLdump').click(function(){showSpinner();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/generate-mysql.php'></iframe></div>");hideSpinner();});$('button#hostfileDump').click(function(){showSpinner();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/generate-hosts.php'></iframe></div>");hideSpinner();});$('button.dataExport').click(function(){var implemented=["vrf","vlan","subnets"];var popsize={};popsize["subnets"]="w700";var dataType=$('select[name=dataType]').find(":selected").val();hidePopups();if(implemented.indexOf(dataType)>-1){showSpinner();$.post('app/admin/import-export/export-'+dataType+'-field-select.php',function(data){if(popsize[dataType]!==undefined){$('div.popup_'+popsize[dataType]).html(data);showPopup('popup_'+popsize[dataType]);}else{$('#popupOverlay div.popup_w400').html(data);showPopup('popup_w400');}
hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}else{$.post('app/admin/import-export/not-implemented.php',function(data){$('#popupOverlay div.popup_w400').html(data);showPopup('popup_w400');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}
return false;});$(document).on("click","button#dataExportSubmit",function(){var dataType=$(this).attr('data-type');var exportFields=$('form#selectExportFields').serialize();switch(dataType){case'vrf':$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/export-vrf.php?"+exportFields+"'></iframe></div>");setTimeout(function(){hidePopups();},1500);break;case'vlan':var exportDomains=$('form#selectExportDomains').serialize();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/export-vlan.php?"+exportDomains+"&"+exportFields+"'></iframe></div>");setTimeout(function(){hidePopups();},1500);break;case'subnets':var exportSections=$('form#selectExportSections').serialize();$("div.dl").remove();$('div.exportDIV').append("<div style='display:none' class='dl'><iframe src='app/admin/import-export/export-subnets.php?"+exportSections+"&"+exportFields+"'></iframe></div>");setTimeout(function(){hidePopups();},1500);break;}
return false;});$(document).on("click","input#exportSelectAll",function(){if(this.checked){$('input#exportCheck').each(function(){this.checked=true;});}else{$('input#exportCheck').each(function(){this.checked=false;});}});$(document).on("click","input#recomputeSectionSelectAll",function(){if(this.checked){$('input#recomputeSectionCheck').each(function(){this.checked=true;});}else{$('input#recomputeSectionCheck').each(function(){this.checked=false;});}});$(document).on("click","input#recomputeIPv4SelectAll",function(){if(this.checked){$('input#recomputeIPv4Check').each(function(){this.checked=true;});}else{$('input#recomputeIPv4Check').each(function(){this.checked=false;});}});$(document).on("click","input#recomputeIPv6SelectAll",function(){if(this.checked){$('input#recomputeIPv6Check').each(function(){this.checked=true;});}else{$('input#recomputeIPv6Check').each(function(){this.checked=false;});}});$(document).on("click","input#recomputeCVRFSelectAll",function(){if(this.checked){$('input#recomputeCVRFCheck').each(function(){this.checked=true;});}else{$('input#recomputeCVRFCheck').each(function(){this.checked=false;});}});$('button.dataImport').click(function(){var implemented=["vrf","vlan","subnets","recompute"];var popsize={};popsize["subnets"]="max";var dataType=$('select[name=dataType]').find(":selected").val();hidePopups();if(implemented.indexOf(dataType)>-1){showSpinner();$.post('app/admin/import-export/import-'+dataType+'-select.php',function(data){if(popsize[dataType]!==undefined){$('div.popup_'+popsize[dataType]).html(data);showPopup('popup_'+popsize[dataType]);}else{$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');}
hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}else{$.post('app/admin/import-export/not-implemented.php',function(data){$('#popupOverlay div.popup_w400').html(data);showPopup('popup_w400');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}
return false;});$(document).on("click","button#dataImportPreview",function(){var implemented=["vrf","vlan","subnets","recompute"];var popsize={};popsize["subnets"]="max";popsize["recompute"]="max";var dataType=$(this).attr('data-type');var importFields=$('form#selectImportFields').serialize();hidePopups();if(implemented.indexOf(dataType)>-1){showSpinner();$.post('app/admin/import-export/import-'+dataType+'-preview.php?'+importFields,function(data){if(popsize[dataType]!==undefined){$('div.popup_'+popsize[dataType]).html(data);showPopup('popup_'+popsize[dataType]);}else{$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');}
hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}else{$.post('app/admin/import-export/not-implemented.php',function(data){$('#popupOverlay div.popup_w400').html(data);showPopup('popup_w400');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}
return false;});$(document).on("click","button#dataImportSubmit",function(){var implemented=["vrf","vlan","subnets","recompute"];var popsize={};popsize["subnets"]="max";popsize["recompute"]="max";var dataType=$(this).attr('data-type');var importFields=$('form#selectImportFields').serialize();hidePopups();if(implemented.indexOf(dataType)>-1){showSpinner();$.post('app/admin/import-export/import-'+dataType+'.php?'+importFields,function(data){if(popsize[dataType]!==undefined){$('div.popup_'+popsize[dataType]).html(data);showPopup('popup_'+popsize[dataType]);}else{$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');}
hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}else{$.post('app/admin/import-export/not-implemented.php',function(data){$('#popupOverlay div.popup_w400').html(data);showPopup('popup_w400');}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});}
return false;});$('button.dataRecompute').click(function(){showSpinner();$.post('app/admin/import-export/import-recompute-select.php',function(data){$('#popupOverlay div.popup_w700').html(data);showPopup('popup_w700');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});$(document).on('click','.btn-tablefix',function(){var tableid=$(this).attr('data-tableid');var fieldid=$(this).attr('data-fieldid');var type=$(this).attr('data-type');$.post('app/admin/verify-database/fix.php',{tableid:tableid,fieldid:fieldid,type:type},function(data){$('div#fix-result-'+tableid+fieldid).html(data).fadeIn('fast');hideSpinner();}).fail(function(jqxhr,textStatus,errorThrown){showError(jqxhr.statusText+"<br>Status: "+textStatus+"<br>Error: "+errorThrown);});return false;});return false;});